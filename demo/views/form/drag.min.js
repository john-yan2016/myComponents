!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={init:function(){var t=document.getElementsByClassName("drop"),o=document.getElementsByClassName("draglist")[0];o=o.children;for(var s=0,n=o.length;s<n;s++)o[s].style.cursor="move";e.removeList(t),document.addEventListener("mousedown",e.mouseEvent.mousedown,!1)},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(t,o){var s=o.split(" ");s.map(function(o,s){o&&!e.hasClass(t,o)&&(t.className+=" "+o)})},removeClass:function(t,o){var s=o.split(" ");s.map(function(o,s){if(o&&e.hasClass(t,o)){var n=new RegExp("(\\s|^)"+o);t.className=t.className.replace(n,"")}})},insertAfter:function(e,t){var o=t.parentNode;o.insertBefore(e,t.nextSibling)},createDroparea:function(e){var t=document.createElement("div");return t.className="droparea",t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",t.style.border="2px dashed #bbb",t.style.position="relative",t.style.backgroundColor="#f8f8f8",t},mouseEvent:{x:0,y:0,ele:"",move:function(t){var t=t||window.event,o=e.mouseEvent.ele;e.addClass(o,"ydragging");var s=document.getElementsByClassName("droparea")[0];s&&s.parentNode.removeChild(s);var n=e.createDroparea(o);e.insertAfter(n,o),o.parentNode.style.width="auto",o.parentNode.style.height="auto",o.style.transition="none",o.style.width=o.offsetWidth+"px",o.style.height=o.offsetHeight+"px",o.style.position="absolute",o.style.zIndex="99999",o.style.backgroundColor="#bbb";var r=t.pageX-e.mouseEvent.x,a=t.pageY-e.mouseEvent.y;o.style.left=r+"px",o.style.top=a+"px";for(var l=r+o.offsetWidth,i=a+o.offsetHeight,d=document.getElementsByClassName("drop"),m=0,u=d.length;m<u;m++)if(!e.hasClass(d[m],"ydragging")){for(var v=d[m].offsetLeft,f=d[m].offsetTop,p=d[m].offsetLeft+d[m].offsetWidth,c=d[m].offsetTop+d[m].offsetHeight,y=0,g=d.length;y<g;y++)e.removeClass(d[y],"candrop"),d[y].style.border="1px solid #eee";if(l>v&&r<p&&i>f&&a<c){d[m].style.border="2px dashed #bbb",e.addClass(d[m],"candrop");break}}document.addEventListener("mouseup",e.mouseEvent.mouseup,!1)},mouseup:function(t){var t=t||window.event,o=e.mouseEvent.ele;document.removeEventListener("mousemove",e.mouseEvent.move,!1);var s=document.getElementsByClassName("candrop")[0],n=document.getElementsByClassName("droparea")[0];if(n)if(n.parentNode.removeChild(n),e.removeClass(o,"ydragging"),s){e.removeClass(s,"candrop"),s.style.border="1px solid #eee";var r=document.createElement("span");r.innerText=o.innerText;var a=!0,l=s.children;if(l)for(var i=0,d=l.length;i<d;i++)if(l[i].innerText.slice(0,l[i].innerText.length-1)==r.innerText){a=!1;break}if(a){var m=document.createElement("i");m.innerText="x",r.appendChild(m),s.appendChild(r),o.style.position="relative",o.style.left=0,o.style.top=0,o.style.zIndex="auto",o.style.backgroundColor="transparent",m.addEventListener("click",function(){var e=this.parentNode;e.parentNode.removeChild(e)},!1)}else o.style.position="relative",o.style.left=0,o.style.top=0,o.style.zIndex="auto",o.style.backgroundColor="transparent"}else o.style.position="relative",o.style.left=0,o.style.top=0,o.style.zIndex="auto",o.style.backgroundColor="transparent"},mousedown:function(t){var t=t||window.event,o=e.mouseEvent.ele=t.target||t.srcElement;0==t.button&&e.hasClass(o.parentNode,"draglist")&&(e.mouseEvent.x=t.pageX-o.offsetLeft,e.mouseEvent.y=t.pageY-o.offsetTop,document.addEventListener("mousemove",e.mouseEvent.move,!1))}},distroy:function(){document.removeEventListener("mousedown",e.mouseEvent.mousedown,!1),document.removeEventListener("mouseup",e.mouseEvent.mouseup,!1),document.removeEventListener("mousemove",e.mouseEvent.move,!1)},removeList:function(e){for(var t=0,o=e.length;t<o;t++){var s=e[t].children;if(s)for(var n=0,r=s.length;n<r;n++){var a=s[n].children[0];a.addEventListener("click",function(){var e=this.parentNode;e.parentNode.removeChild(e)},!1)}}}};exports.default=e}();